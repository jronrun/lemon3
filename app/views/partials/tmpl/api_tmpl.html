<script type="text/html" id="dd_env_tmpl">
    <div class="dropdown-header" id="envh_<%= id %>">
        <h5>
            <span class="label label-<%= level %>">
                <%= name %>
                <% if (desc.length > 0) { %>
                <br/>
                <small class="linebreak"><%= desc %></small>
                <% } %>
            </span>
        </h5>
    </div>
</script>

<script type="text/html" id="dd_env_group_tmpl">
    <div class="dropdown-header" id="grouph_<%= env.id %>_<%= id %>" envg="<%= id %>">
        <h6 style="font-size: 90%">
            {{! <span class="text-<%= 'danger' == env.level ? 'danger' : 'muted' %>"> }}
            <span class="text-muted">
              <em class="fa fa-flag-o"></em>&nbsp;&nbsp;<%= name %>
              <% if (desc.length > 0) { %>
                <footer class="blockquote-footer">
                    <small class="linebreak"><%= desc %></small>
                </footer>
              <% } %>
            </span>
        </h6>
    </div>
</script>

<script type="text/html" id="dd_server_tmpl">
    <a class="dropdown-item" href="javascript:void(0);" id="server_<%= id %>">
        <span class="text-<%= env.level %>" style="font-size: 110%"><%= name %></span>
        <% if (desc.length > 0) { %>
        <footer class="blockquote-footer">
            <small class="linebreak text-<%= env.level %>" style="font-size: 80%"><%= desc %></small>
        </footer>
        <% } %>
    </a>
</script>

<script type="text/html" id="dd_api_group_tmpl">
    <div class="dropdown-header" id="api_group_<%= id %>">
        <h5>
            <span class="label label-info">
                <%= name %>
                <% if (desc.length > 0) { %>
                <br/>
                <small class="linebreak"><%= desc %></small>
                <% } %>
            </span>
        </h5>
    </div>
</script>

<script type="text/html" id="dd_api_tmpl">
    <div class="dropdown-item" id="interf_<%= id %>">
        <blockquote class="blockquote" style="font-size: 110%" apig="<%= group.id %>">
            <p class="m-b-0 linebreak"><%= name %></p>
            <% if (desc.length > 0) { %>
            <footer class="blockquote-footer">
                <small class="linebreak text-muted"><%= desc %></small>
            </footer>
            <% } %>
        </blockquote>
    </div>
</script>

<script type="text/html" id="api_table_tmpl">
<table class="table table-hover" id="s_api_table">
    <thead>
    <tr>
        <th style="border: 0px;">
            <span class="text-muted">API</span>
            <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                <em class="fa fa-search" title="Search"></em>
            </button>
            <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                <em class="fa fa-search" title="Search"></em>
            </button>
        </th>
        <th class="hidden-sm-down" style="width: 37px;"></th>
    </tr>
    </thead>
    <tbody id="s_api_tbody"></tbody>
</table>
</script>

<script type="text/html" id="api_tr_tmpl">
    <%
      lemon.each(items, function(group) {
    %>

      <tr>
          <td>
              <h5>
                  <span class="label label-info">
                      <span class="fa fa-flag"></span>
                      &nbsp;<%= group.info.name %>
                  </span>
              </h5>
          </td>
          <td class="hidden-sm-down"></td>
      </tr>

      <% lemon.each(group.interfs, function(api) { %>
        <tr>
            <td>
                <blockquote class="blockquote" api="1" data-api="<%= lemon.enc(api) %>">
                    <%= highlight(api.request_doc, 'Request', {'tgl-apirequ': 'tgl'}) %>
                    <% if ((api.response_doc || '').length > 0) { %>
                      <%= highlight(api.response_doc, 'Response', {'tgl-apiresp': 'tgl'}) %>
                    <% } %>
                    <footer class="blockquote-footer"> <%= api.name %>
                        <cite><%= api.desc %></cite>
                    </footer>
                </blockquote>
            </td>
            <td class="hidden-sm-down">
                <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                    <em class="fa fa-search" title="Search"></em>
                </button>
                <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                    <em class="fa fa-search" title="Search"></em>
                </button>
            </td>
        </tr>
      <% }); %>
    <% }); %>
</script>

<script type="text/html" id="his_table_tmpl">
    <table class="table table-hover" id="s_his_table">
        <thead>
        <tr>
            <th style="border: 0px;">
                <span class="text-muted">Histories</span>
                <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                    <em class="fa fa-search" title="Search"></em>
                </button>
                <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                    <em class="fa fa-search" title="Search"></em>
                </button>
            </th>
            <th class="hidden-sm-down" style="width: 37px;"></th>
        </tr>
        </thead>
        <tbody id="s_his_tbody"></tbody>
    </table>
</script>

<script type="text/html" id="his_tr_tmpl">
    <%
    var prevInterval = '';
    lemon.each(items, function(his) {
      var curInterval = lemon.when.interval(his.create_time);
      if (curInterval != prevInterval) {
          prevInterval = curInterval;
    %>
          <tr>
              <td>
                  <h5>
                        <span class="label label-info">
                            <span class="fa fa-clock-o"></span> &nbsp;<%= curInterval %>
                        </span>
                  </h5>
              </td>
              <td class="hidden-sm-down"></td>
          </tr>
      <% } %>

      <tr>
          <td>
              <blockquote class="blockquote" his="1" data-his="<%= lemon.enc(his) %>">
                  <%= highlight(his.api.request, 'Request', {'tgl-requ': 'tgl'}) %>
                  <%= highlight(his.api.response, 'Response', {'tgl-resp': 'tgl'}) %>
                  <footer class="blockquote-footer">
                      <span class="text-<%= his.env.level %>"><%= his.env.name %>  <%= his.group.name %> - <%= his.serv.name %></span>
                  </footer>
                  <footer class="blockquote-footer">
                      <cite><%= ( his.api.desc || his.api.name || '') %></cite>
                      <code><span class="text-<%= his.env.level %>"><%= his.serv.url %></span></code>
                      <%= lemon.when.default(his.create_time) %>
                  </footer>
                  <% if (userl) { %>
                      <footer class="blockquote-footer">
                          <% if (his.user.id) { %>
                            <a href="/manage/user/<%= his.user.id %>" target="_blank"><%= (his.user.name || '') %></a>
                          <% } else { %>
                            <%= (his.user.name || '') %>
                          <% } %>
                          <cite><%= (his.user.ip || '') %></cite>
                      </footer>
                  <% } %>
              </blockquote>
          </td>
          <td class="hidden-sm-down">
              <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                  <em class="fa fa-search" title="Search"></em>
              </button>
              <button class="btn btn-secondary btn-sm text-muted" style="border: 0px;" type="button">
                  <em class="fa fa-search" title="Search"></em>
              </button>
          </td>
      </tr>

    <% }); %>
</script>

<div id="dd_api_exchange" style="display: none;"> </div>

{{!--
<div class="dropdown-divider invisible"></div>
<div class="dropdown-header">
    <h5>
        <span class="label label-danger">
            Product Environment
            <br/>
            <small class="linebreak">Add a header to label sections of actions in any dropdown menu.</small>
        </span>
    </h5>

    <div class="dropdown-header">
        <h6>
            Appapi
            <br/>
            <small class="linebreak">Add a header to label sections of actions in any dropdown menu.</small>
        </h6>

        <a class="dropdown-item" href="#">
            <span class="text-info">
                Action
            </span>
            <br/>
            <small class="linebreak text-muted">Add a header to label sections of actions in any dropdown menu.</small>
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="javascript:void(0);">Separated link</a>
    </div>
</div>
--}}
